上节绘制了最简单的一个户型：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a58d9e302f64b06b63c1c6c9fe0d6b3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2644&h=1372&s=979696&e=png&b=edf0f2)

![2025-06-24 18.29.56.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a377236c8ada4bfab4ef8243d083f071~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=2487812&e=gif&f=64&b=faf5df)

这节再绘制一个更复杂一点的户型：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20f7c219c90b458f8c13338ae11c05d1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2242&h=1380&s=816583&e=png&b=eff1f2)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4b7ad278c9646aaafc195224928319b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1850&h=1272&s=2504680&e=png&b=eff2f2)

你可以在酷家乐里搜一下这个户型：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/038cb3ae4fdd4129a04bf726b458703a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1786&h=1268&s=474904&e=png&b=faf5f4)

从酷家乐的户型库里搜杭州 > 梦琴湾 > 一室 的这俩户型。

然后我们开始绘制：

先绘制这面墙：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50c52b08ecfc42b484698714834fe02b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2186&h=1366&s=779459&e=png&b=eef0f1)

创建 store/house2.ts

```javascript
import type { State } from ".";

const data: State['data'] = {
    walls: [
        {
            position: { x: 0, y: 0, z: 0},
            width: 2800,
            height: 3000,
            depth: 200,
            windows: []
        },
    ],
    floors: [
    ],
    ceilings: [
    ]
};

export default data;
```
引入看下效果：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b67e35746fe45f0afc6a0cf0e795152~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=932&h=458&s=52008&e=png&b=1f1f1f)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99dbbba98c594eca8864a0a2316183c4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1316&h=836&s=33505&e=png&b=ffffe0)

然后是这面：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3a3bd67718e4c349427ac375198fbec~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2450&h=1370&s=894745&e=png&b=eef0f1)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8dd13ad60994798aec93bded95926a3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=970&h=962&s=119303&e=png&b=1f1f1f)

```javascript
{
    position: { x: 0, y: 0, z: 0},
    width: 5000,
    height: 3000,
    depth: 200,
    rotationY: -Math.PI / 2,
    windows: []
},
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f36224bd9784c848484c534ff04df82~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1448&h=990&s=57134&e=png&b=ffffe0)

然后是这面：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eee9e5274a8044a68b2fe560c19ee0f2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2060&h=1386&s=740094&e=png&b=eef0f1)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f04b3d017fb4cbea4e66f14d5183ead~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1134&h=846&s=112604&e=png&b=1f1f1f)

```javascript
{
    position: { x: -5000, y: 0, z: 5000},
    width: 5000,
    height: 3000,
    depth: 200,
    windows: []
},
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f461f2c82ecd432eb5182c5b6e733bf3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1578&h=1052&s=66715&e=png&b=ffffe0)

再继续画这面：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d1006e1392646609caf87508202f3b9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1490&h=1262&s=515314&e=png&b=eff1f2)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52f31cbeed864b8d957e555e58f3a2c5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1104&h=806&s=117381&e=png&b=1f1f1f)

```javascript
{
    position: { x: -5000, y: 0, z: 5000},
    width: 1800,
    height: 3000,
    depth: 200,
    rotationY: -Math.PI / 2,
    windows: []
},
```
![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff1eeb5b158c4b0ea937bc19d9850443~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1374&h=870&s=67819&e=png&b=fffee1)

剩下的就不一个个展示了，我们一次性画完：

其中计算位置的时候这样算：

比如这面墙的位置：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/429fa9d5ef1c436085f8f5a978a926ec~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1356&h=1164&s=514718&e=png&b=eef0f1)

就是 8380 的位置，宽度为 2880。

这样就可以依次画出所有的墙。

```javascript
import type { State } from ".";

const data: State['data'] = {
    walls: [
        {
            position: { x: 0, y: 0, z: 0},
            width: 2800,
            height: 3000,
            depth: 200,
            windows: []
        },
        {
            position: { x: 0, y: 0, z: 0},
            width: 5000,
            height: 3000,
            depth: 200,
            rotationY: -Math.PI / 2,
            windows: []
        },
        {
            position: { x: -5000, y: 0, z: 5000},
            width: 5000,
            height: 3000,
            depth: 200,
            windows: []
        },
        {
            position: { x: -5000, y: 0, z: 5000},
            width: 1880,
            height: 3000,
            depth: 200,
            rotationY: -Math.PI / 2,
            windows: []
        },
        {
            position: { x: -5200, y: 0, z: 6880},
            width: 3000,
            height: 3000,
            depth: 200,
            windows: []
        },
        {
            position: { x: -2000, y: 0, z: 6880},
            width: 1580,
            height: 3000,
            depth: 200,
            rotationY: -Math.PI / 2,
            windows: []
        },
        {
            position: { x: -2200, y: 0, z: 8260},
            width: 2880,
            height: 3000,
            depth: 200,
            windows: []
        },
        {
            position: { x: 880, y: 0, z: 7080},
            width: 1380,
            height: 3000,
            depth: 200,
            rotationY: -Math.PI / 2,
            windows: []
        },
        {
            position: { x: 880, y: 0, z: 7080},
            width: 2000,
            height: 3000,
            depth: 200,
            windows: []
        },
        {
            position: { x: 2880, y: 0, z: 0},
            width: 7180,
            height: 3000,
            depth: 200,
            rotationY: -Math.PI / 2,
            windows: []
        },
    ],
    floors: [
    ],
    ceilings: [
    ]
};

export default data;
```

![2025-06-24 19.19.30.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cebed6a08524b7284a5af950ce061a6~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=1045645&e=gif&f=39&b=f7f1de)

先不着急画门窗。

我们先把两个房间的地板画出来：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f00707a025214ae3b8a18c7cc063d4b0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1290&h=1168&s=1540968&e=png&b=f0f3f3)

这里有两种纹理，我们要把它加到数据里：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ef91db015444f53a7638efe04bc29f5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=688&h=512&s=48243&e=png&b=1f1f1f)

绘制的时候做下处理：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/395d13e9a07b4ab58c0a18057e872886~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1302&h=1120&s=258002&e=png&b=1f1f1f)

```javascript
let texture = floorTexture;
if(item.textureUrl) {
    texture = textureLoader.load(item.textureUrl);
    floorTexture.colorSpace = THREE.SRGBColorSpace;
    floorTexture.wrapS =  THREE.RepeatWrapping;
    floorTexture.wrapT =  THREE.RepeatWrapping;
    floorTexture.repeat.set(0.002, 0.002);
}

const geometry = new THREE.ShapeGeometry(shape);
const material = new THREE.MeshPhongMaterial({
    // color: 'orange',
    map: texture,
    side: THREE.BackSide
});
```
就是如果有纹理，就加载这个，否则就默认的。

加一下两个房间的地板：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b65c378a4b8e42f3a30b68e43ac9ad12~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1026&h=742&s=99560&e=png&b=1f1f1f)

先画一个

```javascript
{
    points: [
        { x: -2000, z: 5200},
        { x: -5000, z: 5200},
        { x: -5000, z: 7000},
        { x: -2000, z: 7000},
        { x: -2000, z: 5200},
    ],
    textureUrl: './floor-texture2.png'
}
```
用到的纹理图片是这个：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e6aa6cd77014a238ed1630cb27b78c9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2130&h=924&s=180575&e=png&b=1c1c1c)

![floor-texture2.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/287b2355738544fe9710ccc8794ed76e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=984&h=886&s=53191&e=png&b=f2f2f4)

看下效果：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42270c242dc042f390bce5aa73e8c369~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1446&h=982&s=134470&e=png&b=fffde2)

可以看到，绘制出来了。

我们把另一个房间的也绘制一下：

```javascript
floors: [
    {
        points: [
            { x: -2000, z: 5200},
            { x: -5000, z: 5200},
            { x: -5000, z: 7000},
            { x: -2000, z: 7000},
            { x: -2000, z: 5200},
        ],
    },
    {
        points: [
            { x: 0, z: 0},
            { x: 2880, z: 0},
            { x: 2880, z: 7180},
            { x: 880, z: 7180},
            { x: 880, z: 8380},
            { x: -2000, z: 8380},
            { x: -2000, z: 6880},
            { x: -2000, z: 5000},
            { x: -2000, z: 5000},
            { x: 0, z: 5000},
            { x: 0, z: 0},
        ],
        textureUrl: './floor-texture2.png'
    }
],
```

![2025-06-24 19.50.49.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3bdd743247624bb3a61d5d2dc3a98a05~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=3448636&e=gif&f=53&b=f8f3e0)

这样，两个房间的地板就绘制好了。

天花板也一样：

```javascript
ceilings: [
    {
        points: [
            { x: -2000, z: 5200},
            { x: -5000, z: 5200},
            { x: -5000, z: 7000},
            { x: -2000, z: 7000},
            { x: -2000, z: 5200},
        ],
        height: 3000
    },
    {
        points: [
            { x: 0, z: 0},
            { x: 2880, z: 0},
            { x: 2880, z: 7180},
            { x: 880, z: 7180},
            { x: 880, z: 8380},
            { x: -2000, z: 8380},
            { x: -2000, z: 6880},
            { x: -2000, z: 5000},
            { x: -2000, z: 5000},
            { x: 0, z: 5000},
            { x: 0, z: 0},
        ],
        height: 3000
    }
]
```

![2025-06-24 19.52.40.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/825683588f9941cca282ef4d4c435a98~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=1877071&e=gif&f=61&b=f8f3df)

白墙还是有点暗，我们再加强一下环境光：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9fc34ca85684d689bcc8b907c2b3881~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1210&h=378&s=79200&e=png&b=1f1f1f)


![2025-06-24 19.54.13.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ce387141c6541c59c6cf3ea207e53b7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=1629742&e=gif&f=60&b=fcf6e2)

好多了。

然后画上门和窗户。


![2025-06-24 19.54.57.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab5e03eea01544e382ddabdd77745ccc~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=13773198&e=gif&f=58&b=f1f4f5)

一共有 4 个窗户 1 个门：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85a64cbd80b1491792d5db6843b7c458~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1422&h=1164&s=502336&e=png&b=eef0f1)

先画门：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0990b867559f493b8200ca51ca3ea765~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2224&h=1064&s=666891&e=png&b=eff0f1)


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33fa869ef3054e589f99eabd856aa53f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1068&h=892&s=105089&e=png&b=1f1f1f)

```javascript
doors: [
    {
        leftBottomPosition: {
            left: 1680,
            bottom: 0
        },
        width: 1000,
        height: 2000
    }
]
```

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f6fa3ca46c8047398a8dcb7d258b35e7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1272&h=872&s=73792&e=png&b=f7f0e5)

再画 4 个窗户：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e79e79d9b1784430a560656aaafa4dc1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1874&h=796&s=333110&e=png&b=eff0f1)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b65eef4c15445a78a4aa7cdd636a3d9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1872&h=788&s=347188&e=png&b=eff0f1)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f39dcff921ae49c6a80537c537053146~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=988&h=1212&s=120176&e=png&b=202020)

```javascript
windows: [
    {
        leftBottomPosition: {
            left: 1200,
            bottom: 900
        },
        width: 790,
        height: 1400
    },
    {
        leftBottomPosition: {
            left: 3680,
            bottom: 900
        },
        width: 3000,
        height: 1400
    }
]
```

![2025-06-24 20.04.24.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc7671fcc9ec4946b2f7b7de06a47b3e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=1619715&e=gif&f=54&b=fbf5e1)

和酷家乐里的这俩窗户一样：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a64bc18e97546e68c532a56dfdaee9d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1536&h=944&s=1148483&e=png&b=f4f6f6)

然后再画右边的窗户：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9e1a6d54dee440a9700da1cf752af7d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1472&h=784&s=260808&e=png&b=eff0f1)

在倒数第四面墙：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52720a7a11e14da09251fe9118b1ee9f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1064&h=906&s=114406&e=png&b=1f1f1f)

```javascript
windows: [
    {
        leftBottomPosition: {
            left: 355,
            bottom: 0
        },
        width: 2140,
        height: 2400
    },
]
```
看下效果：


![2025-06-24 20.07.46.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c895e3861f04ec9b90109ee97f339b7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=1266980&e=gif&f=37&b=faf5e2)


对比下酷家乐里的：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/17128f50f30242419b0f24b707945b97~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1358&h=718&s=612927&e=png&b=f5f7f7)

然后再画最后一个窗户：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a428899388b249448532e49142b74633~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1896&h=934&s=373134&e=png&b=eff0f1)

在第五面墙：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fd15625e6e24f2092e4ac0cb8f195eb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1000&h=888&s=112030&e=png&b=1f1f1f)

```javascript
windows: [
    {
        leftBottomPosition: {
            left: 830,
            bottom: 900
        },
        width: 1200,
        height: 1400
    },
]
```


![2025-06-24 20.11.49.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9e44e72f0d14eeaad3cab8e93effef2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=875963&e=gif&f=28&b=faf5e1)

这样，整个户型就绘制完成了。

对比下酷家乐里的：


![2025-06-24 20.13.18.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf3e855ebca345c38a46d57b7fbcd29d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1448&s=13102852&e=gif&f=42&b=eff2f3)

>案例代码上传了[小册仓库](https://github.com/QuarkGluonPlasma/threejs-course-code/tree/main/home-decoration-editor)


## 总结

这节我们绘制了一个复杂一点的户型，有一个客厅、一个书房。

我们按照酷家乐里的户型数据绘制了墙、地板、天花板，然后又加上了门窗。

这样我们的户型库里就有两个户型了。
