这节我们来做家具列表的功能：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e293a38061524b4f81dfc419c3a78ed1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2276&h=1366&s=616243&e=png&b=f8f8f8)

之前的家具都是写死在 json 初始数据里的。

实际上家具应该是动态从左侧拖到场景里，然后编辑下位置、角度。

就像酷家乐这样：


![2025-07-08 01.21.27.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a53c0895d3649a28d0f750e6b22c62a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1514&s=7961980&e=gif&f=24&b=eff3f3)

我们也来实现下这个功能。

首先写下左侧的家具列表：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9aeca5c5db884359a58fcaf08a573acb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1324&h=1314&s=1068762&e=png&b=f1f3f4)

我们准备两个家具：

床、餐桌

餐桌就是之前那个，再找一个床的模型：

https://sketchfab.com/3d-models/bed-52da52f882e242aba646980e9757ef9f#download

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a14cd179f9304c6b9445fbedad1af687~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2302&h=1368&s=2372127&e=png&b=a2a1a1)

先加载进来看下：

放到 public 目录下：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3cc5ecaeec84982903bf93d9ba2585f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=686&h=352&s=28927&e=png&b=191919)

3D 场景里加载下看看：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f35f4f6371c84922b9fcd7db7826e092~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1210&h=688&s=140780&e=png&b=1f1f1f)

```javascript
const gltfLoader = new GLTFLoader();
gltfLoader.load('./bed.glb', (gltf) => {
    scene.add(gltf.scene);
    gltf.scene.scale.setScalar(800);
});
```

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f19bb237bc14c9e8375beced63ec00e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1464&h=940&s=885158&e=png&b=ececec)

之前的餐桌大小刚刚好，我们没调整，但这个床的模型需要放大 800 倍才刚刚好。

我们在模型里也加上这个初始 scale 的数据：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c38d6adad9c422181804fe657495e8b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=702&h=712&s=73291&e=png&b=1f1f1f)

```javascript
modelScale?: number;
```
不设置默认就是 1

改下数据：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ece0a03bf8d24a908a08756c2a2f8b10~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=952&h=1088&s=124145&e=png&b=1f1f1f)

```javascript
{
    id: "furniture222",
    modelUrl: "./bed.glb",
    modelScale: 800,
    position: {
        x: -647.4215938726065,
        y: 0,
        z: 7164.314346338078
    },
    rotation: {
        x: 0,
        y: 1.482366445885148,
        z: 0
    }
}
```

在 2D 和 3D 家具渲染的时候，设置下这个 scale：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d41b18cc5ffe415b8038fc86158684a6~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1462&h=574&s=130224&e=png&b=1f1f1f)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb4e07a17fb64fff8251b5a1c7e6d4ec~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1462&h=620&s=139487&e=png&b=1f1f1f)

```javascript
gltf.scene.scale.setScalar(furniture.modelScale || 1);
```

点击切换户型，应用新数据，看下效果：


![2025-07-20 08.28.11.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff8048ae9aa14e8c8609b76522471487~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2118&h=1190&s=6470064&e=gif&f=29&b=f3f3f3)

渲染出来了。

只是之前地板高度不大对，调一下：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34b72aa578b2463f94ffade75bedf34b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1346&h=690&s=147572&e=png&b=1f1f1f)


![2025-07-20 08.32.02.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/660e1b102af2466b93882e82ca4fc4dd~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2568&h=1418&s=18574491&e=gif&f=36&b=81c8e7)


![2025-07-20 08.33.42.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/829dc39431d94fd299696824169e6aa2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2568&h=1418&s=2611993&e=gif&f=39&b=cbe9ee)


![2025-07-20 08.54.44.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e434294658c4d1895ab2cf482375888~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2568&h=1418&s=3462228&e=gif&f=49&b=f3f3f3)

这样就好了。

现在我们是在 json 里写死的数据，接下来把它改成动态添加的家具。

我们先准备两张家具图片：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e12f798bd9d45a38894553f3b9c659f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1866&h=1176&s=759036&e=png&b=8aceeb)

从这个角度截两张图：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eddd1348ca0941dba9f5196ac394cb33~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=380&h=258&s=72774&e=png&b=e8e8e8)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4021e799c8524633a4338c92a87351e3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=474&h=354&s=112546&e=png&b=f4f4f4)

然后在百度随便搜一张图片，打开这个智能抠图工具：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1733433a84c449c6acc9a8013b1e37ae~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2052&h=1334&s=795613&e=png&b=f0f2f7)


![2025-07-20 08.40.02.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8b8d96ef59245d3ac0613dd07fa96f7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2568&h=1418&s=3230106&e=gif&f=50&b=161919)

点击上传，换成刚截的两张图，就可以得到背景透明的 png 图片了。

下载下来放到 public 目录：


![98d2f27a-74b0-4d36-8e97-0e85dd855a15.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ecc038f720be4a96b6c925040e2b86d1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=550&h=386&s=113808&e=png&a=1&b=c9c8c8)

![3c510157-e853-407c-abd4-f5bdda3165f9.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ceaa6a4122b34f6cbc6ab1b4c58d6b26~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=408&h=272&s=75141&e=png&a=1&b=7d7b76)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8832845156b4356b2ca56616067708e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1966&h=960&s=303999&e=png&b=1e1e1e)

然后来写家具列表：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78e55500e6e04c539de6e31b376719ec~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1284&h=1180&s=185142&e=png&b=1f1f1f)

```javascript
<Card
    hoverable
    style={{ width: 200, margin: 20 }}
    cover={<img
        width={200}
        src="./bed.png"
    />}
>
    <Meta title="床" description="" />
</Card>
<Card
    hoverable
    style={{ width: 200, margin: 20 }}
    cover={<img
        width={200}
        src="./table.png"
    />}
>
    <Meta title="餐桌" description="" />
</Card>
```
这里不用预览，所以直接用原生 img 标签。

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f68bb0ea9c2648789945b5142b6749a4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2042&h=1526&s=1299747&e=png&b=f7f7f7)

这样，家具列表就完成了。

>案例代码上传了[小册仓库](https://github.com/QuarkGluonPlasma/threejs-course-code/tree/main/home-decoration-editor)

## 总结

这节我们加载了床的模型，并且写了家具列表。

我们用百度的智能抠图工具做的 png 透明背景的抠图，其余用到透明背景图片的地方也可以这样。

家具因为是外部找的，有的需要设置下 scale 才能用，但设置好了就不允许用户调整 scale 了，因为家具大小是不能变的。

下节我们来做从家具列表拖拽家具到场景中的功能。


