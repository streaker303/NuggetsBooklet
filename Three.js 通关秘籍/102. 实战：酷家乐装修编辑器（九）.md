我们墙、门、窗、地板、天花板都绘制完成后，这节来绘制一些具体的户型：

![2025-06-19 06.41.08.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d18c8ebabf2546048410fa50d34225fb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=677142&e=gif&f=26&b=fbf3e7)

比如酷家乐里这个三室一厅一厨一卫的户型：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc5c8d3cbd9e4e729f598dc371101da0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2244&h=1390&s=2108150&e=png&b=f0f3f4)

在酷家乐里，点击户型库，可以搜索各种小区的户型：

![2025-06-19 06.48.41.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bee90b8703f64a91abc2c06893210f21~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=3548962&e=gif&f=66&b=eef1f2)

选择一个户型后，会清空当前设计，替换成新户型：

![2025-06-19 06.51.14.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c480f9a3ccf148f4998666088e950ac9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=2090246&e=gif&f=81&b=f6f3f2)

![2025-06-19 06.56.40.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e70aae3a66114510a8abb3d25c15e707~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=2018275&e=gif&f=20&b=eff2f3)

当然，我们不会内置那么多户型，写这两个户型就好了：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/038cb3ae4fdd4129a04bf726b458703a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1786&h=1268&s=474904&e=png&b=faf5f4)

你可以从酷家乐的户型库里搜一下杭州 > 梦琴湾 > 一室 的这俩户型。

我们写这两个简单的：


首先是这个一室的户型：


![2025-06-24 17.39.13.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9fe3ccedaf2c4124a1c09db21cf44548~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=8628062&e=gif&f=31&b=f1f4f5)

然后是这个户型：


![2025-06-24 17.40.21.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f1f0d8d87e44e8b89a3aa5d8a2dde02~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=14492273&e=gif&f=50&b=eff2f3)

首先重构下代码：

创建 store/house1.ts

```javascript
import type { State } from ".";

const data: State['data'] = {
    walls: [
        {
            position: { x: 0, y: 0, z: 0},
            width: 800,
            height: 500,
            depth: 30,
            windows: [
                {
                    leftBottomPosition: {
                        left: 100,
                        bottom: 50
                    },
                    width: 300,
                    height: 300
                }
            ]
        },
        {
            position: { x: 0, y: 0, z: 800},
            width: 800,
            height: 500,
            depth: 30,
            windows: [
                {
                    leftBottomPosition: {
                        left: 100,
                        bottom: 100
                    },
                    width: 600,
                    height: 300
                }
            ]
        },
        {
            position: { x: 0, y: 0, z: 0},
            width: 800,
            height: 500,
            depth: 30,
            rotationY: -Math.PI / 2,
            windows: [
            ]
        },
        {
            position: { x: 800, y: 0, z: 0},
            width: 800,
            height: 500,
            depth: 30,
            rotationY: -Math.PI / 2,
            windows: [
            ],
            doors: [
                {
                    leftBottomPosition: {
                        left: 200,
                        bottom: 20
                    },
                    width: 300,
                    height: 400
                }
            ]
        }
    ],
    floors: [
        {
            points: [
                { x: 0, z: 0},
                { x: 0, z: 800},
                { x: 800, z: 800},
                { x: 800, z: 0},
                { x: 0, z: 0 }
            ]
        }
    ],
    ceilings: [
        {
            points: [
                { x: 0, z: 0},
                { x: 0, z: 800},
                { x: 800, z: 800},
                { x: 800, z: 0},
                { x: 0, z: 0 }
            ],
            height: 500
        }
    ]
};

export default data;
```

我们把数据从 store/index.ts 转移到了这里。

这里用到的 State 类型需要导出：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddf044ad5ae840e6af09c43afef41d53~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=896&h=1138&s=131959&e=png&b=1f1f1f)

然后把 data 换成从 store/house1.ts 导入的。

看下效果：


![2025-06-24 17.49.09.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a03901bee5249278a9abd85e8efdef8~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=1938273&e=gif&f=55&b=fbf6df)

可以看到，渲染是正常的。

不过应该是房子的中心点在坐标原点。

我们用包围盒 Box3  来计算下：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d72e6969da442a9980969bdff4e5349~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1030&h=848&s=141250&e=png&b=1f1f1f)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b485283d41448c5a7b87c34c8b75bd4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1266&h=704&s=141140&e=png&b=1f1f1f)

首先，我们之前是把 floor、wall、ceiling 单独添加到 scene 的。

这次我们先把它添加到一个 group 再添加到 scene。

然后来计算这个 group 的包围盒大小：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58034bebd58b4c2a9e5c0ae84fcff95e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1256&h=790&s=146794&e=png&b=1f1f1f)

```javascript
const box3 = new THREE.Box3();
box3.expandByObject(house);

const center = box3.getCenter(new THREE.Vector3());
house.position.set(-center.x, -center.y, -center.z);
```
用 Box3 包围这个 group，拿到 center，做一下反向位移。

这样，房子的中心就移到坐标原点了：


![2025-06-24 17.57.27.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a057af75e3ef4ee5aa2ea24faa53a201~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2700&h=1464&s=1495749&e=gif&f=54&b=fefadf)

然后我们来观察下这个户型：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c9f0584801d741a08e5835b7c5b43e5a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1530&h=1162&s=427410&e=png&b=eef0f1)

客餐厅是 28.89 平方米。

尺寸的单位是毫米，7380 毫米就是 7.38 米。

如果按照这个单位的话，那一般的数值都是好几千的数量级。

我们现在都是按照几百的数量级来绘制的。

先把数值改一下：

比如高度是 3000 毫米也就是 3 米。

两面的墙宽度 5 米：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30660cd65bcb41a78360400947317ded~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1622&h=1242&s=877110&e=png&b=c9b59a)

高 3 米宽 5 米，厚度 0.2 米：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/676275922627494495cae429424aebc0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1032&h=920&s=96508&e=png&b=1f1f1f)

```javascript
import type { State } from ".";

const data: State['data'] = {
    walls: [
        {
            position: { x: 0, y: 0, z: 0},
            width: 5000,
            height: 3000,
            depth: 200,
            windows: []
        }
    ],
    floors: [
    ],
    ceilings: [
    ]
};

export default data;
```
绘制出来是这样的：

![2025-06-24 18.06.13.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37e8b7b938404082beb34f88456e57d8~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=678563&e=gif&f=33&b=e7e3d9)

数量级大了，那相机的位置也应该调一下：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/900d9942445d40d8901c94603e45f7ea~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1546&h=488&s=109314&e=png&b=1f1f1f)

```javascript
const camera = new THREE.PerspectiveCamera(60, width / height, 1, 100000);
camera.position.set(8000, 8000, 5000);
```
差不多是大一个数量级。


![2025-06-24 18.10.21.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36c206d860aa4fd9b64ee60375bb7bf9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=326981&e=gif&f=34&b=fdfbde)

这样视野就好多了。

继续画另一面墙：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/464b5d1499c0400f8dd6d09be0c638d6~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1022&h=760&s=448761&e=png&b=cbb69e)

    
![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7cdf9377a62d4095815a533462268d48~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1056&h=1074&s=118573&e=png&b=1f1f1f)

```javascript
{
    position: { x: 0, y: 0, z: 7000},
    width: 5000,
    height: 3000,
    depth: 200,
    windows: []
},
```
间隔 7 米。

然后画另外两面：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f71dd4be712742ebac92ed63bed0bd22~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1564&h=1122&s=810085&e=png&b=c9b59a)

门窗先不画。


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/321facebb81e4879b061a29116b7cc4e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=970&h=1140&s=122114&e=png&b=1f1f1f)

```javascript
{
    position: { x: 0, y: 0, z: 0},
    width: 7000,
    height: 3000,
    depth: 200,
    rotationY: -Math.PI / 2,
    windows: []
},
{
    position: { x: 5000, y: 0, z: 0},
    width: 7000,
    height: 3000,
    depth: 200,
    rotationY: -Math.PI / 2,
    windows: []
},
```

![2025-06-24 18.15.03.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d75f5a157b6436da4e534f9abbc1ee4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=508157&e=gif&f=30&b=f8f2de)

这样，四面墙就画完了。

然后加上窗户：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0e7b80f9c8141febcb3cc0bc292a0c1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2062&h=1098&s=978028&e=png&b=d6c0af)

宽度、高度、离地、距离左侧距离，都有具体的数据。


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/336ddd3700c04332aa3c2cecf1716dcb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1084&h=992&s=117594&e=png&b=1f1f1f)

```javascript
{
    leftBottomPosition: {
        left: 2867,
        bottom: 900
    },
    width: 2100,
    height: 1620
}
```
把数据填上，就可以画出窗户来：


![2025-06-24 18.20.34.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3c75b3d6e1940819557ee65ace801c0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=730241&e=gif&f=35&b=f8f7de)

另一边的门也是一样：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/664c570acfcf42d389a3aac989099f25~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2086&h=1170&s=1004733&e=png&b=d6c1b0)



![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b04032429968483f806b4f65630c0ef1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1100&h=1050&s=124045&e=png&b=1f1f1f)
```javascript
{
    leftBottomPosition: {
        left: 6084,
        bottom: 0
    },
    width: 856,
    height: 2152
}
```
数据都是从户型数据里来的，你可以对比下。


![2025-06-24 18.23.33.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1ead1f3104d425f9ee30b874b5eaad7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=884300&e=gif&f=46&b=f7f7da)

这样，门就画好了。

有个小问题：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93d8129f94304eb8b4cd4d120d6644da~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=902&h=742&s=68967&e=png&b=ebe4db)

墙这里因为内部是 7 米，但还有个墙的厚度没加上，所以这两面墙宽度要多加 0.2 米：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f008fbb662244b01a3eb98331027e119~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1088&h=1150&s=152551&e=png&b=1f1f1f)

这样就好了：

![2025-06-24 18.27.19.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93219314e14a40d0a2223c815d9c6b2f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=602665&e=gif&f=28&b=f9f7df)

加上地板、天花板：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/525e681b041e453ea88b97bd055989f9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1036&h=1172&s=120507&e=png&b=202020)

```javascript
floors: [
    {
        points: [
            { x: 0, z: 0},
            { x: 0, z: 7000},
            { x: 5000, z: 7000},
            { x: 5000, z: 0},
            { x: 0, z: 0 }
        ]
    }
],
ceilings: [
    {
        points: [
            { x: 0, z: 0},
            { x: 0, z: 7000},
            { x: 5000, z: 7000},
            { x: 5000, z: 0},
            { x: 0, z: 0 }
        ],
        height: 3000
    }
]
```


![2025-06-24 18.29.56.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a377236c8ada4bfab4ef8243d083f071~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=2487812&e=gif&f=64&b=faf5df)

和酷家乐的对比下：


![2025-06-24 18.31.43.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcc4f060805b436093f6520fece633af~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2090&h=1498&s=7753674&e=gif&f=62&b=eef1f3)

一样的。

>案例代码上传了[小册仓库](https://github.com/QuarkGluonPlasma/threejs-course-code/tree/main/home-decoration-editor)


## 总结

这节我们绘制了第一个户型。

从酷家乐里招了两个户型图，它的单位是毫米，我们根据数据绘制出了 4 面墙、一个窗、一个门，还有天花板和地板。

户型绘制出来效果和酷家乐的是一样的。

并且，我们还用 Box3 包围盒计算出了户型的中心位置，把它移到了坐标原点。

下节我们继续绘制几个户型。
