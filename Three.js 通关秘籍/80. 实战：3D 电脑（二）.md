上节画了电脑的场景：

![2025-07-03 11.19.08.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/17aae115022744c8b40cb0effb4a1d1b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=2294572&e=gif&f=21&b=a4d1e2)

这节把桌面部分画一下。

我们要求能点击、滚动，可以做和网页一样的交互。

这种就只能用 CSS3DRenderer 了。

我们先引入下 CSS3DRenderer：

现在不直接把 WebGL 渲染的 canvas 元素挂载到 dom 了：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e42e53881334d7b9f8b7bd64f701be3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1100&h=540&s=67827&e=png&b=1f1f1f)


而是和 CSS3DRenderer 的 dom 一起：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d5bf1962193423bb737352743532569~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1636&h=1090&s=274518&e=png&b=1f1f1f)

```javascript
const css3Renderer = new CSS3DRenderer();
css3Renderer.setSize(width, height);

const div = document.createElement('div');
div.style.position = 'relative';
div.appendChild(css3Renderer.domElement);
css3Renderer.domElement.style.position = 'absolute';
css3Renderer.domElement.style.left = '0px';
css3Renderer.domElement.style.top = '0px';
css3Renderer.domElement.style.pointerEvents = 'none';

div.appendChild(renderer.domElement);
document.body.appendChild(div);
```
CSS3DRenderer 的 dom 在上面，所以要用绝对定位。

然后它也一样要每帧渲染：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/739aa87841084c37a7f3c54fc118f285~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1134&h=670&s=109851&e=png&b=1f1f1f)

```javascript
css3Renderer.render(scene, camera);
```
之后我们把显示器的内容画一下：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ee04c3f76174787bd971510d0a2b599~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=948&h=698&s=77375&e=png&b=1f1f1f)


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c536805093e74777983c1747b38715f4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=774&h=566&s=54564&e=png&b=1f1f1f)

```javascript
<div id="desktop"></div>
```
```css
#desktop {
  width: 500px;
  height: 500px;
  background: pink;
}
```

然后把它加到显示器上：

先找下桌面位置：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1585ee09df74bde884d6acc0a4ab5e9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1180&h=732&s=111563&e=png&b=1f1f1f)

打印下所有网格模型：

```javascript
if(obj.isMesh) {
    console.log(obj.name, obj);
}
```

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4e0d3c031be4e99ab151bd78e86bbe3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=414&h=448&s=54318&e=png&b=fefefe)

分别改下颜色试试：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8191b454bc14021a87c705ccce03b50~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1298&h=716&s=119705&e=png&b=1f1f1f)

```javascript
if(obj.name === 'Object_4') {
    obj.material.color.set('orange');
}
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0615ea30d672494c867a010029906c47~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1320&h=934&s=429389&e=png&b=add9e6)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48d2b326ce914591b39d40b02e5978a5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1340&h=732&s=259360&e=png&b=add9e6)

排除 Object_4、Object_7，那剩下的 Object_5 就是桌面了。

我们加一下局部坐标系：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1311a5242a5a44d48f4f25928ca6c102~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1416&h=734&s=119144&e=png&b=1f1f1f)

```javascript
if(obj.name === 'Object_5') {
    const helper = new THREE.AxesHelper(1000);
    obj.add(helper);
}
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73d1ddde4a1044a08568da04c84b73e2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1760&h=1206&s=553245&e=png&b=add9e6)

位置正好在桌面中央。

那直接把 CSS3DObject 加到这个对象下么？

试一下：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54a0131968654d7fa8f7a95d8881fea7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1572&h=1118&s=208332&e=png&b=1f1f1f)

```javascript
const ele = document.getElementById('desktop');
const css3dObj = new CSS3DObject(ele);
```
```javascript
obj.add(css3dObj);
```

![2025-07-07 09.11.11.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/173d14e48d944797b4302ff60f8a8b26~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=733535&e=gif&f=22&b=fdb7c2)

可以看到，明显太大了。

这是因为外面有个 scale：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8886363c76845e48da8e117e1c5952a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1278&h=540&s=121252&e=png&b=1f1f1f)

会把所有子对象一起放大。

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b413a9cdd0344d3c950f05bb4522fc35~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=998&h=370&s=87962&e=png&b=1f1f1f)


```javascript
css3dObj.rotateX(-Math.PI / 2);
css3dObj.scale.set(0.01,0.01,0.01);
```
旋转一下，然后缩小 100 倍。

这样放大后就是比较合适的大小了。


![2025-07-07 09.14.35.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a75336547c2d42f79548ef41d1dfe2b0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=2683054&e=gif&f=20&b=a4d1e2)

然后它的位置还要在 y 轴移动一段距离：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c6a633c3f35468a99623d5d03bf674f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1088&h=650&s=143559&e=png&b=add9e6)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfc4e6c7197040b7a7298b58ea8dc61e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1186&h=430&s=108300&e=png&b=1f1f1f)

因为放大 100 倍，移动 2 就是 200。

```javascript
css3dObj.position.y = 2;
```

![2025-07-07 09.21.12.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dadb4f6d0146442b8e4bc950d5c6a4ab~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=3543061&e=gif&f=25&b=a3d1e1)

刚刚好。

我们设置下背面隐藏：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f92a7aa24dd4320bae4f9d3bb279891~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1022&h=604&s=68464&e=png&b=1f1f1f)

```css
backface-visibility: hidden;
```

![2025-07-07 09.22.29.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/270951af172d470787afba7eebc340f1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=1981984&e=gif&f=18&b=a3d1e1)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fefa7a44f8ca487e95798e924c6eb867~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=830&h=386&s=43302&e=png&b=202020)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/77a28204bf8644fa8c2796b14eeffb36~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1682&h=744&s=215701&e=png&b=add9e6)

大小正好，x 轴方向位置需要移动一下。


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/362a0ace6cbb47fcba8d6bf2f46a78e9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1292&h=504&s=124549&e=png&b=1f1f1f)

```javascript
css3dObj.position.x = -0.16;
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33d602484e7c49668ab00c0f7f6a431c~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2098&h=1208&s=385545&e=png&b=add9e6)

CSS3DObject 的位置确定好了，接下来就可以填充网页内容了。

>案例代码上传了[小册仓库](https://github.com/QuarkGluonPlasma/threejs-course-code/tree/main/css3d-computer)
## 总结

这节我们加上了 CSS3DRenderer。

我们给桌面上加了一个 CSS3DObject，用 html 来渲染内容。

要注意的是整体放大了几百倍，那内容想要大小合适就需要缩小。

我们找到了桌面的对象，添加了一个局部坐标系 AxesHelper，这样调整位置就方便多了。

下节我们继续来填充桌面的内容。



