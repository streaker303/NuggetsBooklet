前面搞定了 3D 场景的搭建和 CSS3DObject 的位置确定：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33d602484e7c49668ab00c0f7f6a431c~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2098&h=1208&s=385545&e=png&b=add9e6)

这节来填充网页内容。

先准备一张桌面背景：

![mian.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddfbb8c8ccbd46b5b412398a83f56c75~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=3840&h=2160&s=718610&e=jpg&b=759ef1)


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f02716589ba24764a60c6ed858f78801~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1860&h=914&s=1299898&e=png&b=1c1c1c)

加一个 img 元素：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9c3a03d2f544bae9f0c5e0d59d82654~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1200&h=606&s=78676&e=png&b=1f1f1f)

```javascript
<img className="bg" src="./bg.png"/>
```
改下样式：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/681b87a62d9348f9b38765c62f33199b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=958&h=866&s=117788&e=png&b=1f1f1f)

```css
#desktop {
  width: 600px;
  height: 1100px;
  background: pink;
  backface-visibility: hidden;
  position: relative;
}
#desktop .bg {
  position: absolute;
  left: -250px;
  top: 250px;
  width: 1100px;
  height: 600px;
  rotate: -90deg;
}
```
desktop 绝对定位，下面的图片相对定位。

然后再加一个应用图标：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09a9c995b6a7494fb2e8fab67816be91~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1252&h=960&s=140686&e=png&b=1f1f1f)

```javascript
<div className='app'>
  <div className='logo'></div>
  <div className='name'>浏览器</div>
</div>
```
加下样式：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d09dd625f3843109f0eead45b57d0a9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=890&h=1232&s=157012&e=png&b=1f1f1f)

```css
#desktop .app {
  position: absolute;
  left: 50px;
  top: 900px;
  width: 100px;
  height: 100px;
  rotate: -90deg;
  border: 1px solid blue;
}
#desktop .app .logo{
  width: 50px;
  height: 50px;
  background: blue;
  translate: 50% 0;
}

#desktop .app .name{
  font-size: 30px;
  color: white;
}
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abedcca0567b4d33928b7fce784e4017~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1578&h=1024&s=613118&e=png&b=add9e6)

找个浏览器图标：


![24b4c549-a21e-4169-a002-8a4c1e48d3d9.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d70c4521a04a47d48db0fc9f87ac3dcf~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&h=900&s=246139&e=png&a=1&b=ec9838)


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/80d7081d4cd34b93bc101dfc30d94ee6~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2032&h=946&s=378732&e=png&b=1b1b1b)

去掉 border，加下背景：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f15ee8de9f04dd7bb728d2ada633b7a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=986&h=860&s=125377&e=png&b=1f1f1f)

```javascript
background: url(./chrome.png);
background-size: cover;
```

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93715bac52c44fb2ac17d5884ac60169~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1342&h=958&s=578060&e=png&b=add9e6)

然后双击的时候我们打开搜索引擎：

先加一个 iframe：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8aad5fb6b9d44b218919c1db79ecb887~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1572&h=1050&s=171786&e=png&b=1f1f1f)

```javascript
<iframe className='browser' src='https://sogou.com/'/>
```
然后加一下样式：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85a5b22e3c44408fb33df50076dd7987~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=762&h=798&s=91557&e=png&b=1f1f1f)

```css
#desktop .browser {
  width: 900px;
  height: 600px;
  position: absolute;
  left: -150px;
  top: 250px;
  rotate: -90deg;
}
```

![2025-07-07 10.59.25.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f3311b353ae45c3b1647c8168a2b4d4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=255835&e=gif&f=29&b=a3d1e1)

这样，就能在桌面上打开网页搜索了。

然后我们点击图标的时候再打开浏览器：


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d204d572799e4337841779047c43c4f7~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1828&h=1214&s=221024&e=png&b=1f1f1f)

```javascript
const [open, setOpen] = useState(false);

return <div>
    <div id="main">
      <div id="content">
      </div>
      <div id="desktop">
        <img className="bg" src="./bg.png"/>
        <div className='app' onDoubleClick={() => setOpen(true)}>
          <div className='logo'></div>
          <div className='name'>浏览器</div>
        </div>
        <iframe className='browser' style={{display: open ? 'block' : 'none'}} src='https://sogou.com/'/>
      </div>
    </div>
</div>
```
加一个状态来控制浏览器的显示隐藏，双击的时候改变状态。

顺便加个 hover 的样式：

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08d0ea668c4c4cf8ba2677ed9f946545~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&h=746&s=103823&e=png&b=1f1f1f)
```css
#desktop .app:hover {
  background:lightblue;
}
```
但你会发现点击事件没生效：


![2025-07-07 13.24.20.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be5bf49964f648f3b4f7d9f40d36d0c4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=176971&e=gif&f=17&b=a3d1e1)

这是为什么呢？

看下 dom 就知道了：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3071f3d16264a6a80375c8bdf82b7fb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1966&h=1084&s=697742&e=png&b=add9e6)

用 CSS3DObject  渲染的时候，会把那个 dom 拿过来，放到单独的元素下面。

这个元素不是在 react 挂载的那个 dom 上。

而 react 绑定事件是用事件冒泡的方式，统一在根元素处理。

现在都到根元素之外了，自然就处理不到了。

所以我们换一种绑定事件的方式：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7234ab4a376040b9be09c7c62b67f0c5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1366&h=1120&s=191777&e=png&b=1f1f1f)

```javascript
useEffect(() => {
    const ele = document.querySelector('.app');
    const handler = () => {
      setOpen(true);
    };
    ele.addEventListener('click', handler)
    return () => {
      ele.removeEventListener('click', handler);
    }
  }, []);
```
原生 dom 绑定事件，自然就没有 react 事件代理的问题了。


![2025-07-07 13.37.28.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b476c81b3b7c48ff872c9b27accc2f4a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=178587&e=gif&f=14&b=a3d1e1)

然后我们来优化一下：


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fab0aa218804130a50f9932e84c0a4f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1288&h=766&s=149648&e=png&b=1f1f1f)

给 desktop 设置隐藏：

```javascript
style={{display: 'none'}}
```
注意，一定是 style 的 display:none，因为 CSS3DRenderer在渲染元素的时候会把它设置为 display:block

然后点击 desktop 的时候，我们把相机拉近：

把 camera 导出：


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c21ee11138a479bb6cfdb1d589baa2f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=984&h=804&s=97249&e=png&b=1f1f1f)

接收一下：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06ea344277db462fbd83d7ad079b5bf1~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1016&h=596&s=77929&e=png&b=1f1f1f)

```javascript
const cameraRef = useRef();
```
```javascript
cameraRef.current = camera;
```

然后点击浏览器的时候，把镜头拉近：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1bbcd53678d4853a4a801c94b805cda~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1350&h=900&s=150209&e=png&b=1f1f1f)

```javascript
const camera = cameraRef.current;
```
```javascript
camera.position.set(500, 100, 0);
```
看下效果：


![2025-07-07 13.58.52.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7952291963814dd5b5a83348a772c7c4~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=615733&e=gif&f=36&b=a3d1e1)

然后点击其他地方的时候，回到原位置：


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a450976ca7141e59a33e2004132d520~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1416&h=1084&s=204655&e=png&b=1f1f1f)

```javascript
const handler2 =() => {
  setOpen(false);
  camera.position.set(1200, 500, 0);
}

document.addEventListener('click', handler2);
return () => {
  ele.removeEventListener('click', handler);
  document.removeEventListener('click', handler2);
}
```
然后我们用 gsap 加个缓动动画：

```
pnpm install --save gsap
```


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/866a07ddbcfe45c1ae506fd267cf0753~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1216&h=928&s=143974&e=png&b=1f1f1f)
```javascript
gsap.to(camera.position, {
    x: 500,
    y: 100,
    z: 0
    duration: 1
});
```
一秒运动过去。

看下效果：


![2025-07-07 14.08.12.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/311931327e6f4cf28648bf39fe66452b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=2307492&e=gif&f=18&b=a3d1e1)


![2025-07-07 14.10.15.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/410bff4b67df42dd8e3c2869a9007e03~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=2409713&e=gif&f=17&b=a3d1e1)

去掉坐标轴，我们整体看下：

![2025-07-07 14.32.39.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1adcb7e0709410c8516bb7b9a93e6ee~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2812&h=1398&s=6361239&e=gif&f=50&b=a3d1e1)

>案例代码上传了[小册仓库](https://github.com/QuarkGluonPlasma/threejs-course-code/tree/main/css3d-computer)
## 总结

这节我们给 3D 电脑的 CSS3DObject 加上了内容。

用 html + css 写了布局，然后点击图标弹出 iframe 的网页。

要注意 react 的事件绑定方式导致 CSS3DObject 里的内容触发不了事件，需要用原生的方式绑定。

再就是要给元素设置 display:none 的 style，这样刚开始隐藏， CSS3DRenderer 渲染它的时候设置 display:block 就会把它显示出来。

当你需要在 3D 场景里加一些用网页渲染的东西，就可以用 CSS3DRenderer 来做。
